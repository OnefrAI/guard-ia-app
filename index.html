<!DOCTYPE html>
<html lang="es">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Acceso a Herramientas GUARD-IA</title>
   <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" xintegrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

   <style>
     :root {
       --bg-color: #0a0a0a; --card-color: #1a1a1a; --text-color: #e0e0e0; --text-medium-color: #a0a0a0;
       --accent-color: #39FF14; --border-color: rgba(255, 255, 255, 0.2);
       --input-bg: #2a2a2a; --input-border: rgba(255, 255, 255, 0.1); --info-fixed-text: #0a0a0a;
       --modal-bg-color: rgba(30, 30, 30, 0.98);
     }
     body { background-color: var(--bg-color); color: var(--text-color); font-family: 'Inter', sans-serif; }
     .hidden { display: none; }
     .auth-container { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 1rem; }
     .auth-box { background-color: var(--card-color); border: 1px solid var(--border-color); border-radius: 0.75rem; padding: 2rem; width: 100%; max-width: 400px; box-shadow: 0 10px 25px rgba(0,0,0,0.3); }
     h1 > span { color: var(--accent-color); }
     .auth-input { background-color: var(--input-bg); border: 1px solid var(--input-border); color: var(--text-color); transition: border-color 0.2s, box-shadow 0.2s; }
     .auth-input:focus { outline: none; border-color: var(--accent-color); box-shadow: 0 0 0 2px rgba(57, 255, 20, 0.2); }
     .auth-tab { border-bottom: 2px solid transparent; color: var(--text-medium-color); transition: border-color 0.2s, color 0.2s; }
     .auth-tab.active { border-color: var(--accent-color); color: var(--text-color); }
     .submit-btn { background-color: var(--accent-color); color: var(--info-fixed-text); transition: opacity 0.2s; }
     .submit-btn:hover { opacity: 0.9; }
     .loader-container { display: flex; justify-content: center; align-items: center; height: 100vh; }
     .loader { border: 4px solid var(--border-color); border-top: 4px solid var(--accent-color); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
     @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
     a.bg-card-bg:hover { transform: translateY(-0.25rem); }
     .bg-card-bg { background-color: var(--card-color); border-color: var(--border-color); }
     .info-button-integrated { background: none; border: none; padding: 0.5rem; cursor: pointer; color: var(--text-medium-color); transition: color 0.2s ease, transform 0.2s ease; font-size: 0.8rem; }
     .info-button-integrated:hover { color: var(--text-color); transform: scale(1.1); }
     .modal-overlay { display: none; position: fixed; inset: 0; background-color: rgba(0,0,0, 0.8); z-index: 100; align-items: center; justify-content: center; }
     .modal-overlay.active { display: flex; }
     .modal { background-color: var(--modal-bg-color); padding: 25px 35px; border-radius: 12px; max-width: 500px; width: 90%; position: relative; }
     .modal-close-button { position: absolute; top: 10px; right: 10px; background: none; border: none; cursor: pointer; }
     .modal-close-button i { color: var(--text-medium-color); transition: color 0.2s ease; font-size: 1.4rem; }
     .modal-close-button:hover i { color: var(--accent-color); }
   </style>
</head>
<body>
    
    <div id="loader" class="loader-container">
        <div class="loader"></div>
    </div>

    <div id="login-screen" class="auth-container hidden">
        <h1 class="text-4xl font-bold text-center mb-4">Herramientas <span>GUARD-IA</span></h1>
        <p class="text-center text-[var(--text-medium-color)] max-w-md mb-8">Bienvenido a la nueva versión segura. Para proteger tu privacidad, ahora tus datos se cifran en tu dispositivo y se asocian a tu cuenta. Solo tú puedes acceder a ellos.</p>
        <div class="auth-box">
            <div class="flex border-b border-[var(--border-color)] mb-6">
                <button id="loginTab" class="auth-tab flex-1 py-2 text-center font-semibold active">Iniciar Sesión</button>
                <button id="registerTab" class="auth-tab flex-1 py-2 text-center font-semibold">Registrarse</button>
            </div>
            <form id="loginForm">
                <input type="email" id="loginEmail" placeholder="Correo electrónico" class="auth-input w-full p-3 rounded mb-4" required>
                <input type="password" id="loginPassword" placeholder="Contraseña" class="auth-input w-full p-3 rounded mb-6" required>
                <button type="submit" class="submit-btn w-full py-3 rounded font-semibold">Entrar</button>
            </form>
            <form id="registerForm" class="hidden">
                <input type="email" id="registerEmail" placeholder="Correo electrónico" class="auth-input w-full p-3 rounded mb-4" required>
                <input type="password" id="registerPassword" placeholder="Contraseña (mín. 6 caracteres)" class="auth-input w-full p-3 rounded mb-6" required>
                <button type="submit" class="submit-btn w-full py-3 rounded font-semibold">Crear Cuenta</button>
            </form>
            <p id="authError" class="text-red-500 text-sm text-center mt-4 h-4"></p>
        </div>
    </div>

    <div id="main-app-content" class="hidden">
        <header class="p-4 z-50 flex justify-between items-center bg-[var(--card-color)] border-b border-[var(--border-color)] sticky top-0">
            <h2 class="text-lg font-semibold text-[var(--accent-color)]">GUARD-IA</h2>
            <div id="user-info" class="text-right"></div>
        </header>
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-10 relative z-10 flex-grow">
            <div class="max-w-lg mx-auto space-y-3 sm:space-y-4">
               <a href="https://chatgpt.com/g/g-6766e58171cc81918eb92f23b79f66ae-guard-ia" target="_blank" rel="noopener noreferrer" class="w-full bg-card-bg border py-3 px-4 sm:py-4 sm:px-6 rounded-xl text-base sm:text-lg flex items-center justify-between gap-3 transition-transform">
                 <span class="flex items-center gap-2 sm:gap-3"><i class="fas fa-robot text-lg w-5 sm:text-xl sm:w-6 text-center"></i><span>ChatGPT GUARD-IA</span></span>
                 <button class="info-button-integrated" data-title="ChatGPT GUARD-IA" data-text="Interactúa con una versión personalizada de ChatGPT diseñada para GUARD-IA." onclick="showModal('ChatGPT GUARD-IA', this.dataset.text); event.stopPropagation(); event.preventDefault();"><i class="fas fa-info-circle text-lg"></i></button>
               </a>
               <a href="herramientas-guardia/calculadora-de-drogas/index.html" target="_self" class="w-full bg-card-bg border py-3 px-4 sm:py-4 sm:px-6 rounded-xl text-base sm:text-lg flex items-center justify-between gap-3 transition-transform">
                 <span class="flex items-center gap-2 sm:gap-3"><i class="fas fa-calculator text-lg w-5 sm:text-xl sm:w-6 text-center"></i><span>Calculadora de Drogas</span></span>
                 <button class="info-button-integrated" data-title="Calculadora de Drogas" data-text="Herramienta para cálculos relacionados con drogas. Uso bajo responsabilidad del usuario." onclick="showModal('Calculadora de Drogas', this.dataset.text); event.stopPropagation(); event.preventDefault();"><i class="fas fa-info-circle text-lg"></i></button>
               </a>
                <a href="herramientas-guardia/bloc-de-notas/index.html" target="_self" class="w-full bg-card-bg border py-3 px-4 sm:py-4 sm:px-6 rounded-xl text-base sm:text-lg flex items-center justify-between gap-3 transition-transform">
                 <span class="flex items-center gap-2 sm:gap-3"><i class="fas fa-sticky-note text-lg w-5 sm:text-xl sm:w-6 text-center"></i><span>Bloc de Notas</span></span>
                 <button class="info-button-integrated" data-title="Bloc de Notas" data-text="Un bloc de notas digital que guarda tus notas de forma segura en la nube en tu cuenta personal." onclick="showModal('Bloc de Notas', this.dataset.text); event.stopPropagation(); event.preventDefault();"><i class="fas fa-info-circle text-lg"></i></button>
                </a>
                <a href="https://saferlayer.com/" target="_blank" rel="noopener noreferrer" class="w-full bg-card-bg border py-3 px-4 sm:py-4 sm:px-6 rounded-xl text-base sm:text-lg flex items-center justify-between gap-3 transition-transform">
                 <span class="flex items-center gap-2 sm:gap-3"><i class="fas fa-tint text-lg w-5 sm:text-xl sm:w-6 text-center"></i><span>Marca de agua by Saferlayer</span></span>
                 <button class="info-button-integrated" data-title="Marca de agua by Saferlayer" data-text="Herramienta externa para agregar marcas de agua a tus archivos." onclick="showModal('Marca de agua by Saferlayer', this.dataset.text); event.stopPropagation(); event.preventDefault();"><i class="fas fa-info-circle text-lg"></i></button>
                </a>
                <a href="herramientas-guardia/calendario-del-GUARD-IA/index.html" target="_self" class="w-full bg-card-bg border py-3 px-4 sm:py-4 sm:px-6 rounded-xl text-base sm:text-lg flex items-center justify-between gap-3 transition-transform">
                 <span class="flex items-center gap-2 sm:gap-3"><i class="fas fa-calendar-alt text-lg w-5 sm:text-xl sm:w-6 text-center"></i> <span>Calendario del GUARD-IA</span></span>
                 <button class="info-button-integrated" data-title="Calendario del GUARD-IA" data-text="Calendario de turnos que guarda tus datos en la nube de forma segura y privada." onclick="showModal('Calendario del GUARD-IA', this.dataset.text); event.stopPropagation(); event.preventDefault();"><i class="fas fa-info-circle text-lg"></i></button>
                </a>
            </div>
        </div>
        <section class="py-10 relative z-10">
         <h2 class="text-3xl sm:text-4xl font-bold text-center mb-6 sm:mb-8 drop-shadow-lg">CANALES DE<br>ACCIÓN POLICIAL</h2>
         <div class="max-w-lg mx-auto px-4 sm:px-0 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
           <a href="https://www.youtube.com/@PoliceActivity" target="_blank" rel="noopener noreferrer" class="w-full bg-card-bg border py-3 px-4 rounded-xl text-center text-base sm:text-lg transition-transform flex items-center justify-center gap-2"><i class="fas fa-video"></i> PoliceActivity</a>
           <a href="https://www.youtube.com/@RealWorldPolice" target="_blank" rel="noopener noreferrer" class="w-full bg-card-bg border py-3 px-4 rounded-xl text-center text-base sm:text-lg transition-transform flex items-center justify-center gap-2"><i class="fas fa-video"></i> Real World Police</a>
           <a href="https://www.youtube.com/@CodeBlueCam" target="_blank" rel="noopener noreferrer" class="w-full bg-card-bg border py-3 px-4 rounded-xl text-center text-base sm:text-lg transition-transform flex items-center justify-center gap-2"><i class="fas fa-video"></i> Code Blue Cam</a>
           <a href="https://www.youtube.com/@AuditTheAudit" target="_blank" rel="noopener noreferrer" class="w-full bg-card-bg border py-3 px-4 rounded-xl text-center text-base sm:text-lg transition-transform flex items-center justify-center gap-2"><i class="fas fa-gavel"></i> Audit the Audit</a>
           <a href="https://www.youtube.com/@DonutOperator" target="_blank" rel="noopener noreferrer" class="w-full bg-card-bg border py-3 px-4 rounded-xl text-center text-base sm:text-lg transition-transform flex items-center justify-center gap-2"><i class="fas fa-video"></i> Donut Operator</a>
           <a href="https://www.youtube.com/@FreeFieldTraining" target="_blank" rel="noopener noreferrer" class="w-full bg-card-bg border py-3 px-4 rounded-xl text-center text-base sm:text-lg transition-transform flex items-center justify-center gap-2"><i class="fas fa-chalkboard-teacher"></i> FreeFieldTraining</a>
         </div>
        </section>
        <section class="py-10 relative z-10">
         <h2 class="text-3xl sm:text-4xl font-bold text-center mb-6 sm:mb-8 drop-shadow-lg"> LECTURAS POLICIALES<br>RECOMENDADAS </h2>
         <div class="relative max-w-lg mx-auto px-4 sm:px-0">
           <button class="slider-nav-button absolute top-1/2 left-2 sm:left-0 transform -translate-y-1/2 sm:-translate-x-full p-2 rounded-full text-xl sm:text-2xl z-30" onclick="prevSlide()" aria-label="Anterior Slide">❮</button>
           <div class="overflow-hidden rounded-lg border border-[var(--border-color)]">
             <div class="flex transition-transform duration-500 ease-in-out" id="sliderWrapper">
                 <div class="min-w-full p-3 sm:p-4 text-center bg-card-bg"><img src="https://imgs.search.brave.com/VNMdgeChtgIurBN_p-DnqmSakN2ak7bRrP0Yo1n3ef8/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWFn/ZXMuY2RuMi5idXNj/YWxpYnJlLmNvbS9m/aXQtaW4vNTIweDUy/MC8yZS80YS8yZTRh/YzYyZmIxMTJhOWNh/NDdmMTMwMGY4NzVk/OTUwNC5qcGc" alt="Portada del libro Sobre el Combate" class="w-auto h-48 sm:h-56 md:h-64 object-contain rounded-lg mb-3 sm:mb-4 mx-auto"><h3 class="text-lg sm:text-xl font-semibold">Sobre el Combate</h3><p class="text-sm sm:text-base text-medium-text">Dave Grossman</p></div>
                 <div class="min-w-full p-3 sm:p-4 text-center bg-card-bg"><img src="https://imgs.search.brave.com/8-PdIHSHt2WqbYUGXhLD_4Bpw8RWitCfRvV2KiHgqpo/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWFn/ZXMuY2RuMy5idXNj/YWxpYnJlLmNvbS9m/aXQtaW4vNTIweDUy/MC9mZC82Yy9mZDZj/Mjc3ZDBmZDMyZmU3/NmJiN2MyZGMwZTc3/YjZhYi5qcGc" alt="Portada del libro Matar" class="w-auto h-48 sm:h-56 md:h-64 object-contain rounded-lg mb-3 sm:mb-4 mx-auto"><h3 class="text-lg sm:text-xl font-semibold">Matar</h3><p class="text-sm sm:text-base text-medium-text">Dave Grossman</p></div>
                 <div class="min-w-full p-3 sm:p-4 text-center bg-card-bg"><img src="https://imgs.search.brave.com/pOsg_as-IHCw3Y7BqzG17ZB9cw9PJCLFMZQ8GrqlEMI/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9waWN0/dXJlcy5hYmVib29r/cy5jb20vaXNibi85/Nzg4NDMwOTczNzA1/LWVzLTMwMC5qcGc" alt="Portada del libro En la Línea de Fuego" class="w-auto h-48 sm:h-56 md:h-64 object-contain rounded-lg mb-3 sm:mb-4 mx-auto"><h3 class="text-lg sm:text-xl font-semibold">En la Línea de Fuego</h3><p class="text-sm sm:text-base text-medium-text">Ernesto Pérez Vera y Fernando Pérez Pacho</p></div>
                 <div class="min-w-full p-3 sm:p-4 text-center bg-card-bg"><img src="https://imgs.search.brave.com/SK2GxbZt59aSZEreTfVwkKxKWMVepLCnmRS1vzvnaFA/rs:fit:500:0:0:0/g:ce/aHR0cHM6Ly9waWN0/dXJlcy5hYmVib29r/cy5jb20vaXNibi85/Nzg4NDE1MzczNzU5/LWVzLmpwZw" alt="Portada del libro Tiroteo en Miami" class="w-auto h-48 sm:h-56 md:h-64 object-contain rounded-lg mb-3 sm:mb-4 mx-auto"><h3 class="text-lg sm:text-xl font-semibold">Tiroteo en Miami</h3><p class="text-sm sm:text-base text-medium-text">Edmundo Mireles Jr.</p></div>
             </div>
           </div>
           <button class="slider-nav-button absolute top-1/2 right-2 sm:right-0 transform -translate-y-1/2 sm:translate-x-full p-2 rounded-full text-xl sm:text-2xl z-30" onclick="nextSlide()" aria-label="Siguiente Slide">❯</button>
         </div>
         <div id="sliderIndicators" class="flex justify-center space-x-2 mt-4"></div>
        </section>
        <footer class="mt-auto py-4 pb-6 sm:py-4 text-center relative z-10 border-t border-[var(--border-color)]">
            <a href="https://t.me/OnefraGT" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center gap-2 text-base sm:text-lg">
                <i class="fab fa-telegram-plane text-xl sm:text-2xl"></i> Contacta con @OnefraGT
            </a>
        </footer>
    </div>
    <div class="modal-overlay" id="infoModalOverlay">
     <div class="modal">
       <button class="modal-close-button" onclick="closeInfoModal()"><i class="fas fa-times"></i></button>
       <h2 id="modalTitle" class="text-2xl font-bold mb-4 text-[var(--accent-color)]"></h2>
       <p id="modalText" class="text-base"></p>
     </div>
    </div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAf3I3_aW__lBtTVlEJ9xesIWkEJ6lMJp8",
      authDomain: "guard-ia-a36da.firebaseapp.com",
      projectId: "guard-ia-a36da",
      storageBucket: "guard-ia-a36da.appspot.com",
      messagingSenderId: "914018061004",
      appId: "1:914018061004:web:6ab6c6ca728199033bd069",
      measurementId: "G-W45Z1BH3T4"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const loader = document.getElementById('loader');
    const loginScreen = document.getElementById('login-screen');
    const mainAppContent = document.getElementById('main-app-content');
    const userInfo = document.getElementById('user-info');
    const loginTab = document.getElementById('loginTab');
    const registerTab = document.getElementById('registerTab');
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');
    const authError = document.getElementById('authError');
    let uiInitialized = false;

    onAuthStateChanged(auth, user => {
        loader.classList.add('hidden');
        if (user) {
            mainAppContent.classList.remove('hidden');
            loginScreen.classList.add('hidden');
            userInfo.innerHTML = `
                <div class="flex items-center gap-3">
                    <span class="text-sm text-[var(--text-medium-color)] hidden sm:inline">${user.email}</span>
                    <button id="logoutBtn" class="bg-red-600 text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-red-700 transition">Salir</button>
                </div>`;
            document.getElementById('logoutBtn').addEventListener('click', () => signOut(auth));
            if (!uiInitialized) {
                initializeAppUI();
                uiInitialized = true;
            }
        } else {
            loginScreen.classList.remove('hidden');
            mainAppContent.classList.add('hidden');
            uiInitialized = false;
        }
    });

    loginTab.addEventListener('click', () => {
        loginTab.classList.add('active'); registerTab.classList.remove('active');
        loginForm.classList.remove('hidden'); registerForm.classList.add('hidden');
        authError.textContent = '';
    });
    registerTab.addEventListener('click', () => {
        registerTab.classList.add('active'); loginTab.classList.remove('active');
        registerForm.classList.remove('hidden'); loginForm.classList.add('hidden');
        authError.textContent = '';
    });
    loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        signInWithEmailAndPassword(auth, document.getElementById('loginEmail').value, document.getElementById('loginPassword').value)
            .catch(error => { authError.textContent = getFirebaseAuthErrorMessage(error.code); });
    });
    registerForm.addEventListener('submit', (e) => {
        e.preventDefault();
        createUserWithEmailAndPassword(auth, document.getElementById('registerEmail').value, document.getElementById('registerPassword').value)
            .catch(error => { authError.textContent = getFirebaseAuthErrorMessage(error.code); });
    });
    function getFirebaseAuthErrorMessage(errorCode) {
        switch (errorCode) {
            case 'auth/invalid-email': return 'El formato del correo no es válido.';
            case 'auth/user-not-found':
            case 'auth/wrong-password':
            case 'auth/invalid-credential': return 'Correo o contraseña incorrectos.';
            case 'auth/email-already-in-use': return 'Este correo ya está registrado.';
            case 'auth/weak-password': return 'La contraseña debe tener al menos 6 caracteres.';
            default: return 'Ha ocurrido un error inesperado.';
        }
    }

    const infoModalOverlay = document.getElementById('infoModalOverlay');
    const modalTitle = document.getElementById('modalTitle');
    const modalText = document.getElementById('modalText');
    window.showModal = function(title, text) {
        modalTitle.textContent = title;
        modalText.textContent = text;
        infoModalOverlay.classList.add('active');
    }
    window.closeInfoModal = function() {
        infoModalOverlay.classList.remove('active');
    }

    function initializeAppUI() {
        const sliderWrapper = document.getElementById('sliderWrapper');
        if (!sliderWrapper) return;
        let currentSlide = 0;
        const totalSlides = sliderWrapper.children.length;
        window.nextSlide = () => { currentSlide = (currentSlide + 1) % totalSlides; updateSlider(); };
        window.prevSlide = () => { currentSlide = (currentSlide - 1 + totalSlides) % totalSlides; updateSlider(); };
        function updateSlider() { sliderWrapper.style.transform = `translateX(-${currentSlide * 100}%)`; }
    }
</script>

</body>
</html>
