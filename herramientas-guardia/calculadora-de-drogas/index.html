<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora de drogas</title>
  <meta name="description" content="Calculadora de drogas basada en dosis m√≠nimas psicoactivas de sustancias controladas.">

  <!-- üîó Font Awesome para el icono de Home -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        xintegrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

  <style>
    /* Variables de color y configuraci√≥n para tema oscuro */
    :root {
      --primary-color: #39FF14;
      --primary-hover: #2aff00;
      --background: #0a0a0a;
      --container-bg: #1a1a1a;
      --text-color: #e0e0e0;
    }
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', Arial, sans-serif;
      background-color: var(--background);
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      color: var(--text-color);
      position: relative;
    }
    .container {
      background: var(--container-bg);
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      padding: 20px;
      width: 90%;
      max-width: 600px;
      text-align: center;
    }
    h1 {
      text-transform: uppercase;
    }
    /* Clase para resaltar en verde ne√≥n */
    .neon-green {
      color: var(--primary-color);
    }
    form {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    label {
      margin-top: 10px;
      font-weight: bold;
    }
    input, select, button {
      padding: 10px;
      margin: 10px;
      font-size: 16px;
      width: 100%;
      max-width: 300px;
      border-radius: 5px;
      border: none;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
    }
    button {
      background-color: var(--primary-color);
      color: black; /* Texto en negro para resaltar */
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background-color: var(--primary-hover);
    }
    #result {
      margin-top: 20px;
      font-size: 20px;
      font-weight: bold;
    }
    /* Secci√≥n para imagen y explicaci√≥n en dos columnas */
    #substanceInfo {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-top: 20px;
      text-align: left;
    }
    .image-container {
      flex: 1;
      min-width: 250px;
    }
    .image-container img {
      width: 100%;
      max-width: 300px;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }
    .explanation {
      flex: 1;
      min-width: 250px;
    }
    .confetti {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      display: none;
    }
    /* Caja de informaci√≥n encuadrada */
    .info-box {
      margin-top: 30px;
      font-size: 14px;
      color: #ccc;
      text-align: center;
      border: 1px solid var(--primary-color);
      border-radius: 8px;
      padding: 15px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      background-color: var(--container-bg);
    }
    .info-box a {
      text-decoration: none;
      color: var(--primary-color);
    }
    /* Media query para mejorar la responsividad */
    @media (max-width: 480px) {
      input, select, button {
        max-width: 100%;
      }
      .container {
        padding: 15px;
      }
    }

    /* üîÅ Estilos del bot√≥n HOME */
    .home-button {
      position: fixed;
      top: 1rem;
      left: 1rem;
      background: #1f2937;
      color: white;
      padding: 0.6rem 0.8rem;
      border-radius: 0.6rem;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      z-index: 999;
      transition: background 0.3s ease;
      text-decoration: none;
    }
    .home-button:hover {
      background: #374151;
    }
  </style>
</head>
<body>

  <!-- ‚úÖ Bot√≥n HOME -->
  <a href="../../index.html" class="home-button" title="Volver a la pantalla principal">
    <i class="fas fa-house"></i>
  </a>

  <main class="container">
    <!-- T√≠tulo en may√∫sculas y con "DROGAS" en neon -->
    <h1>CALCULADORA DE <span class="neon-green">DROGAS</span></h1>
    <form id="offenseForm">
      <!-- Campo de selecci√≥n de sustancia -->
      <label for="drugType">Tipo de sustancia:</label>
      <select id="drugType" name="drugType" required>
        <option value="" disabled selected>--Selecciona una opci√≥n--</option>
        <option value="cocaina" data-limit="7.5" data-image="images/cocaina.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Coca√≠na, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>7.5 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Coca√≠na</option>
        <option value="mdma" data-limit="2.4" data-image="images/mdma.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada √âxtasis (MDMA), el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>2.4 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">√âxtasis (MDMA)</option>
        <option value="cristal_mdma" data-limit="2.4" data-image="images/cristal_mdma.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Cristal (MDMA), el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>2.4 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Cristal (MDMA)</option>
        <option value="hachis" data-limit="25" data-image="images/hachis.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Hach√≠s, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>25 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Hach√≠s</option>
        <option value="speed" data-limit="0.9" data-image="images/speed.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Speed - Anfetaminas, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>0.9 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Speed - Anfetaminas</option>
        <option value="heroina" data-limit="3" data-image="images/heroina.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Hero√≠na, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>3 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Hero√≠na</option>
        <option value="lsd" data-limit="0.003" data-image="images/lsd.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada LSD, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>0.003 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">LSD</option>
        <option value="marihuana" data-limit="100" data-image="images/marihuana.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Marihuana, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>100 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Marihuana</option>
        <option value="mefedrona" data-limit="2.4" data-image="images/mefedrona.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Mefedrona, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>2.4 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Mefedrona</option>
        <option value="metanfetamina" data-limit="0.3" data-image="images/metanfetamina.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Metanfetamina (Crystal), el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>0.3 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Metanfetamina (Crystal)</option>
        <option value="morfina" data-limit="10" data-image="images/morfina.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Morfina, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>10 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Morfina</option>
        <option value="tuci" data-limit="2.4" data-image="images/tuci.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada TuCi o &quot;Coca√≠na Rosa&quot;, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>2.4 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">TuCi o "Coca√≠na Rosa"</option>
        <option value="ketamina" data-limit="1" data-image="images/ketamina.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Ketamina, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>1 gramo</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Ketamina</option>
        <option value="ghb" data-limit="105" data-image="images/ghb.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada GHB - GBL - √âxtasis L√≠quido, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>105 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">GHB - GBL - √âxtasis L√≠quido</option>
        <option value="fentanilo" data-limit="0.5" data-image="images/fentanilo.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Fentanilo, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>0.5 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Fentanilo</option>
        <option value="metadona" data-limit="1.2" data-image="images/metadona.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Metadona, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>1.2 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Metadona</option>
        <option value="clonazepam" data-limit="50" data-image="images/clonazepam.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Clonazepam (Rivotril), el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>50 unidades o m√°s sin receta</span> la cantidad m√≠nima para una infracci√≥n penal.">Clonazepam (Rivotril)</option>
        <option value="dmt" data-limit="50" data-image="images/dmt.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada DMT o Dimetiltriptamina, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>50 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">DMT o Dimetiltriptamina</option>
        <option value="hoja_de_coca" data-limit="2000" data-image="images/hoja_de_coca.jpg" data-explanation="Conforme a la jurisprudencia vigente, aunque en este momento no sea posible determinar con exactitud la cantidad ni la pureza de la sustancia incautada Hoja de Coca, el hecho de que indiciariamente se supere la cantidad necesaria para un consumo de m√°s de cinco d√≠as implica que el porte se presume destinado al tr√°fico, siendo <span style='color:red;'>2000 gramos</span> la cantidad m√°xima permitida en v√≠a p√∫blica.">Hoja de Coca</option>
      </select>
      
      <!-- Campo de cantidad -->
      <label for="quantity">Cantidad (gramos):</label>
      <input type="number" id="quantity" name="quantity" placeholder="Ingresa la cantidad" required min="0.01" step="any">
      
      <button type="submit" id="calculateButton">Calcular Infracci√≥n</button>
    </form>
    
    <div id="result" role="alert"></div>
    
    <!-- Secci√≥n para imagen y explicaci√≥n en dos columnas -->
    <div id="substanceInfo" style="display: none;">
      <div class="image-container" id="drugImage">
        <img src="" alt="Imagen de la sustancia">
      </div>
      <div class="explanation" id="explanationText"></div>
    </div>
    
    <!-- Informaci√≥n en recuadro -->
    <div class="info-box">
      <p>
        Los datos utilizados en esta herramienta provienen del <strong>Instituto Nacional de Toxicolog√≠a</strong> y est√°n basados en la normativa vigente sobre dosis m√≠nimas psicoactivas de sustancias controladas.
      </p>
      <p>
        Fuente: <a class="poder-judicial" href="https://www.poderjudicial.es/cgpj/es/Poder-Judicial/Tribunal-Supremo/Actividad-del-TS/Estudios/Cuadros-de-cantidades-de-notoria-importancia-y-dosis-minimas-psicoactivas-de-las-principales-sustancias-toxicas-objeto-de-trafico-de-drogas--actualmente-vigente" target="_blank" rel="noopener">Tabla oficial del Poder Judicial</a>
      </p>
    </div>
  </main>
  
  <canvas class="confetti" id="confettiCanvas"></canvas>
  
  <!-- Carga de la librer√≠a para confeti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.1"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('offenseForm');
      const resultDiv = document.getElementById('result');
      const substanceInfoDiv = document.getElementById('substanceInfo');
      const drugImgElement = document.querySelector('#drugImage img');
      const explanationTextDiv = document.getElementById('explanationText');

      // Manejar el env√≠o del formulario
      form.addEventListener('submit', (e) => {
        e.preventDefault(); // Prevenir el env√≠o por defecto

        const quantityValue = parseFloat(document.getElementById('quantity').value);
        const drugTypeSelect = document.getElementById('drugType');
        const selectedOption = drugTypeSelect.options[drugTypeSelect.selectedIndex];

        // Validaciones b√°sicas
        if (isNaN(quantityValue) || quantityValue <= 0 || !selectedOption.value) {
          resultDiv.innerHTML = '<p style="color: red;">Por favor, ingresa los datos correctamente.</p>';
          substanceInfoDiv.style.display = 'none';
          return;
        }

        // Obtener el l√≠mite establecido en el atributo data-limit
        const limit = parseFloat(selectedOption.dataset.limit);
        const infractionType = quantityValue >= limit ? 'penal' : 'administrativa';

        // Mostrar resultado seg√∫n el tipo de infracci√≥n
        if (infractionType === 'administrativa') {
          resultDiv.innerHTML = '<p style="color: yellow;">‚úî Infracci√≥n administrativa.</p>';
        } else {
          resultDiv.innerHTML = '<p style="color: red; text-transform: uppercase;">‚ö† Infracci√≥n penal.</p>';
          launchConfetti();
        }

        // Actualizar y mostrar la imagen de la sustancia
        drugImgElement.src = selectedOption.dataset.image;
        drugImgElement.alt = selectedOption.text;

        // Actualizar la explicaci√≥n basada en el atributo data-explanation
        explanationTextDiv.innerHTML = `<p>${selectedOption.dataset.explanation}</p>`;

        // Mostrar la secci√≥n de informaci√≥n de la sustancia (imagen y explicaci√≥n)
        substanceInfoDiv.style.display = 'flex';
      });

      // Funci√≥n para lanzar el confeti (se ejecuta en infracciones penales)
      function launchConfetti() {
        confetti({
          particleCount: 200,
          spread: 70,
          origin: { y: 0.6 }
        });
      }
    });
  </script>
</body>
</html>
